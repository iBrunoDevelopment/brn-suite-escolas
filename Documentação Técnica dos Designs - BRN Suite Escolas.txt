Documentação Técnica dos Designs - BRN Suite Escolas
1. Princípios de UI/UX e Tema Geral (BRN UI)

Identidade Visual (BRN UI):
Componentes Principais: Cards, Sidebar Fixa (Desktop) / Overlay (Mobile), Header, Badges, Sombras Leves (elevação sutil), Bordas Arredondadas (para cards, botões, campos).
Responsividade: Design "mobile-first" adaptável a desktop e mobile, garantindo uma experiência otimizada em todas as telas.
Modo Escuro: Suporte total e consistente para modo escuro em todos os elementos da interface.
Foco na Usabilidade:
Clareza: Mensagens, rótulos e feedback são diretos e compreensíveis.
Eficiência: Fluxos otimizados para as tarefas principais de cada perfil.
Consistência: Elementos e interações visuais e comportamentais padronizadas em todo o sistema.
Acessibilidade: Cores, contrastes e tamanhos de fonte considerados para boa legibilidade.
2. Navegação e Layout Base

Desktop:
Sidebar Fixa: Menu de navegação principal sempre visível à esquerda.
Header: Barra superior com título da tela, possivelmente ações globais.
Conteúdo: Área principal com cards, tabelas, formulários.
Mobile:
Header Reduzido: Contém título da tela, botão de voltar (se aplicável) e ícone de "Menu Hambúrguer".
Sidebar Overlay: O menu principal (sidebar) é ativado pelo hambúrguer e desliza como um overlay, cobrindo o conteúdo principal.
Conteúdo Vertical: Todas as informações são empilhadas verticalmente em cards ou seções.
Floating Action Buttons (FABs): Utilizados para ações primárias (ex: "Novo Lançamento", "Adicionar Usuário") em telas de lista.
3. Tratamento de Dados - Formatos e Validações

Datas:
Entrada (Input): Suporta dd/mm/yyyy e yyyy-mm-dd. Máscaras de input ou date pickers são recomendados.
Validação: Verificação de formato, data real e, se aplicável, intervalos (ex: data futura).
Armazenamento (MySQL): YYYY-MM-DD.
Exibição (Output): dd/mm/yyyy (padrão Brasil). Configuração de formato via "Configurações Gerais".
Valores Monetários:
Entrada (Input): Suporta 1.234,56, 1234,56 e 1234.56. Máscaras de input são recomendadas.
Validação: Verificação de formato numérico, precisão decimal (2 casas) e, se aplicável, valores não negativos.
Armazenamento (MySQL): DECIMAL(10, 2) (ou similar), utilizando ponto como separador decimal.
Exibição (Output): 1.234,56 com símbolo "R$". Configuração de formato via "Configurações Gerais".
Validação Geral:
Cliente-Side (JS): Feedback instantâneo para formato e campos obrigatórios.
Servidor-Side (PHP): Validação robusta e indispensável para segurança e integridade dos dados, com Prepared Statements (PDO) para evitar SQL Injection.
4. Role-Based Access Control (RBAC)

O controle de acesso é fundamental, baseado em 4 perfis principais:

Administrador (ADM):
Acesso: Total (CRUD e visualização) a todas as escolas, módulos, dados e configurações do sistema.
Dashboard: Completo, com abas Alertas/Pendências e Logs/Auditoria.
Lançamentos: CRUD para todos os lançamentos de todas as escolas.
Fechamento Semestral: Acesso total, incluindo reprogramações por escola.
Cadastros e Configurações: CRUD completo em todos os módulos.
Operador:
Acesso: Cria e edita lançamentos para qualquer escola. Monitoramento.
Dashboard: Completo, com abas Alertas/Pendências e Logs/Auditoria (logs restritos às próprias ações).
Lançamentos: CRUD para todos os lançamentos de todas as escolas.
Fechamento Semestral: Acesso total para visualizar e executar fechamentos/reprogramações para qualquer escola.
Cadastros e Configurações: Sem acesso.
Diretor:
Acesso: Gestão e monitoramento somente para sua escola atribuída.
Dashboard: Específico para sua escola.
Lançamentos: CRUD somente para lançamentos de sua escola. Anexa documentos.
Fechamento Semestral: Sem acesso.
Cadastros e Configurações: Sem acesso.
Técnico GEE:
Acesso: Somente leitura e monitoramento das escolas a ele atribuídas.
Dashboard: Específico, mostrando dados das escolas atribuídas.
Lançamentos: Somente leitura dos lançamentos das escolas atribuídas.
Fechamento Semestral: Sem acesso.
Cadastros e Configurações: Sem acesso.
5. Arquitetura Modular (PHP 8 + PDO)

O backend é organizado em módulos lógicos, facilitando o desenvolvimento, manutenção e escalabilidade:

Módulo Core: Autenticação, RBAC, Logging, Configurações Globais, Tratamento de Erros.
Módulo de Usuários e Perfis: CRUD de usuários, gestão de perfis e atribuições de escola.
Módulo de Escolas: CRUD de escolas.
Módulo de Cadastros Base: CRUD de Programas, Contas Bancárias, Rubricas, Categorias, Fornecedores, Status de Movimentação, Tipos de Pagamento.
Módulo de Lançamentos: CRUD de Lançamentos, gestão de rateio, upload/gestão de anexos, validações específicas.
Módulo de Dashboards: Serviços para agregação e apresentação de dados, lógicas para alertas e logs.
Módulo de Fechamento Semestral: Lógica de fechamento de período, cálculos e reprogramações.
Módulo de Relatórios: Lógica para geração de relatórios customizáveis, exportação (CSV, PDF, XLSM) e geração de templates de importação.
Tecnologias:
PHP 8: Lógica de negócio, controllers, services.
PDO: Todas as interações com o banco de dados (MySQL), utilizando Prepared Statements.
MySQL: Banco de dados relacional.
Segurança: Todas as entradas de usuário são validadas no backend e tratadas com Prepared Statements. Logs de auditoria registram ações chave.
6. Anexação de Documentos

Localização: Seção "Anexos" no "Formulário Novo Lançamento" (abaixo da descrição, acima do rateio) e na tela de "Detalhe de Lançamento Financeiro".
Funcionalidade: Permite upload de múltiplos arquivos via seletor nativo (mobile: câmera, galeria, arquivos). Exibe arquivos em lista com nome, tipo e opção de remoção. Validação de tipo e tamanho de arquivo. Diretor pode anexar para lançamentos de sua escola.
7. Exportação de Dados e Planilhas Base

Exportação de Lançamentos Detalhados (CSV/XLSX/XLSM): Opção disponível na "Listagem de Lançamentos" ou "Relatórios Customizáveis".
CSV/XLSX: Dados crus ou formatados, mantendo filtros aplicados.
XLSM (Prestação de Contas): Gera uma planilha com uma aba de dados com estrutura de colunas pré-definida e consistente, otimizada para que usuários possam aplicar suas próprias macros de prestação de contas. O sistema não insere macros.
Planilha Base (Template para Importação - XLSX): Opção separada para baixar um template XLSX com cabeçalhos pré-definidos, formatação de células, e dropdowns de validação (para Rubrica, Escola, etc.) para facilitar futura importação de dados pelo usuário, mantendo a integridade do layout.